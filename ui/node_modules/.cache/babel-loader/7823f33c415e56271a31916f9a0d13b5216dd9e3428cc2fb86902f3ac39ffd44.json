{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useLanguage}from'../contexts/LanguageContext';import{createTripFromPrompt,saveTripToLocalStorage,extractLocation}from'../utils/tripUtils';import'./SearchBar.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchBar=()=>{const{t}=useLanguage();const navigate=useNavigate();const[prompt,setPrompt]=useState('');const[isFocused,setIsFocused]=useState(false);const[isGenerating,setIsGenerating]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(false);const textareaRef=useRef(null);const wrapperRef=useRef(null);// API endpoint - update this with your backend URL\nconst API_ENDPOINT=process.env.REACT_APP_API_URL||'http://localhost:8000/api/trip-planner';// Generate a unique tripId based on timestamp and prompt hash\nconst generateTripId=promptText=>{const timestamp=Date.now();// Extract location for better URL\nconst location=extractLocation(promptText);const locationSlug=location.toLowerCase().replace(/\\s+/g,'-').replace(/[^a-z0-9-]/g,'').substring(0,20);const promptHash=promptText.substring(0,10).replace(/\\s+/g,'-').toLowerCase().replace(/[^a-z0-9-]/g,'');return\"\".concat(locationSlug||'trip',\"-\").concat(timestamp,\"-\").concat(promptHash);};const handleSubmit=async e=>{e.preventDefault();if(prompt.trim()&&!isGenerating){setIsGenerating(true);setError(null);setSuccess(false);const tripId=generateTripId(prompt.trim());const promptData={prompt:prompt.trim(),userId:'Kartik7',tripId:tripId,timestamp:new Date().toISOString()};// Create trip object from the prompt (always create, even if API fails)\nconst newTrip=createTripFromPrompt(prompt.trim(),tripId,'Kartik7');// Create AbortController for timeout\nconst controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),10000);// 10 second timeout\nlet apiSuccess=false;// Try to send to API (optional - app works without it)\ntry{console.log('Attempting to send POST request to:',API_ENDPOINT);console.log('Request data:',promptData);const response=await fetch(API_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(promptData),signal:controller.signal});clearTimeout(timeoutId);console.log('Response status:',response.status);if(response.ok){// Try to parse JSON, but handle non-JSON responses\nlet data;const contentType=response.headers.get('content-type');if(contentType&&contentType.includes('application/json')){data=await response.json();}else{const text=await response.text();data={message:text||'Request sent successfully',tripId:tripId};}console.log('API Response:',data);apiSuccess=true;}else{console.warn('API returned non-OK status:',response.status);// Don't throw error, just log it - we'll save locally anyway\n}}catch(error){clearTimeout(timeoutId);// Only log the error, don't block the user\nif(error.name==='TypeError'&&error.message.includes('fetch')){console.warn('Could not connect to backend API. Saving trip locally only.');}else if(error.name==='AbortError'){console.warn('API request timed out. Saving trip locally only.');}else{console.warn('API error (non-critical):',error.message);}// Continue anyway - we'll save locally\n}// Always save trip to localStorage (works offline)\nsaveTripToLocalStorage(newTrip);console.log('Trip saved locally:',newTrip);// Show success message\nsetSuccess(true);// Reset form after successful submission\nsetPrompt('');// Navigate directly to the trip chat page immediately\nnavigate(\"/trips/\".concat(tripId,\"/chat\"));setIsGenerating(false);}};const handleKeyDown=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSubmit(e);}};// Auto-resize textarea based on content\nuseEffect(()=>{const textarea=textareaRef.current;const wrapper=wrapperRef.current;if(textarea){// Reset height to auto to get the correct scrollHeight\ntextarea.style.height='auto';// Get min/max heights based on screen size\nconst isMobile=window.innerWidth<=768;const minHeight=isMobile?70:70;// Minimum height in pixels\nconst maxHeight=isMobile?200:250;// Maximum height in pixels\n// Calculate new height based on content\nconst scrollHeight=textarea.scrollHeight;// If prompt is empty, force minimum height\nconst newHeight=prompt.trim()===''?minHeight:Math.min(Math.max(scrollHeight,minHeight),maxHeight);textarea.style.height=\"\".concat(newHeight,\"px\");// Adjust wrapper min-height to accommodate textarea + actions + padding\nif(wrapper){const actionsHeight=isMobile?36:40;// Button height\nconst padding=isMobile?20:24;// Top + bottom padding\nconst margin=isMobile?10:10;// Margin bottom of textarea\n// Base min-height for empty state\nconst baseMinHeight=isMobile?110:120;// If prompt is empty, use base min-height, otherwise calculate\nconst calculatedMinHeight=prompt.trim()===''?baseMinHeight:newHeight+actionsHeight+padding+margin;wrapper.style.minHeight=\"\".concat(Math.max(calculatedMinHeight,baseMinHeight),\"px\");}}},[prompt,isFocused]);// Initial resize on mount\nuseEffect(()=>{const textarea=textareaRef.current;if(textarea){textarea.style.height='auto';const scrollHeight=textarea.scrollHeight;const isMobile=window.innerWidth<=768;const minHeight=isMobile?70:70;textarea.style.height=\"\".concat(Math.max(scrollHeight,minHeight),\"px\");}},[]);return/*#__PURE__*/_jsx(\"div\",{id:\"search-bar\",className:\"search-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"search-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{ref:wrapperRef,className:\"search-wrapper \".concat(isFocused?'focused':'',\" \").concat(isGenerating?'generating':''),onClick:e=>{// If clicking on the wrapper (not on textarea or button), focus the textarea\nif(e.target===e.currentTarget||e.target.classList.contains('search-wrapper')){var _textareaRef$current;(_textareaRef$current=textareaRef.current)===null||_textareaRef$current===void 0?void 0:_textareaRef$current.focus();}},children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,className:\"search-input\",placeholder:t('searchPlaceholder'),value:prompt,onChange:e=>setPrompt(e.target.value),onFocus:()=>setIsFocused(true),onBlur:()=>setIsFocused(false),onKeyDown:handleKeyDown,disabled:isGenerating,style:{width:'100%',overflowY:'auto'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-actions\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"char-count\",children:prompt.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:prompt.length>2000?'char-count-warning':'',children:[prompt.length,\" characters\"]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"search-button\",disabled:!prompt.trim()||isGenerating,title:\"Generate itinerary (Enter)\",children:isGenerating?/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}):/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M5 12H19M19 12L12 5M19 12L12 19\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"search-message search-error\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u274C \",/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error]})}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"search-message search-success\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u2705 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Success:\"}),\" Your travel plan request has been sent successfully!\"]})})]})});};export default SearchBar;","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","useLanguage","createTripFromPrompt","saveTripToLocalStorage","extractLocation","jsx","_jsx","jsxs","_jsxs","SearchBar","t","navigate","prompt","setPrompt","isFocused","setIsFocused","isGenerating","setIsGenerating","error","setError","success","setSuccess","textareaRef","wrapperRef","API_ENDPOINT","process","env","REACT_APP_API_URL","generateTripId","promptText","timestamp","Date","now","location","locationSlug","toLowerCase","replace","substring","promptHash","concat","handleSubmit","e","preventDefault","trim","tripId","promptData","userId","toISOString","newTrip","controller","AbortController","timeoutId","setTimeout","abort","apiSuccess","console","log","response","fetch","method","headers","body","JSON","stringify","signal","clearTimeout","status","ok","data","contentType","get","includes","json","text","message","warn","name","handleKeyDown","key","shiftKey","textarea","current","wrapper","style","height","isMobile","window","innerWidth","minHeight","maxHeight","scrollHeight","newHeight","Math","min","max","actionsHeight","padding","margin","baseMinHeight","calculatedMinHeight","id","className","children","onSubmit","ref","onClick","target","currentTarget","classList","contains","_textareaRef$current","focus","placeholder","value","onChange","onFocus","onBlur","onKeyDown","disabled","width","overflowY","length","type","title","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin"],"sources":["C:/Users/Admin/OneDrive/Desktop/Princeton/src/components/SearchBar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useLanguage } from '../contexts/LanguageContext';\nimport { createTripFromPrompt, saveTripToLocalStorage, extractLocation } from '../utils/tripUtils';\nimport './SearchBar.css';\n\nconst SearchBar = () => {\n  const { t } = useLanguage();\n  const navigate = useNavigate();\n  const [prompt, setPrompt] = useState('');\n  const [isFocused, setIsFocused] = useState(false);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const textareaRef = useRef(null);\n  const wrapperRef = useRef(null);\n\n  // API endpoint - update this with your backend URL\n  const API_ENDPOINT = process.env.REACT_APP_API_URL || 'http://localhost:8000/api/trip-planner';\n\n  // Generate a unique tripId based on timestamp and prompt hash\n  const generateTripId = (promptText) => {\n    const timestamp = Date.now();\n    // Extract location for better URL\n    const location = extractLocation(promptText);\n    const locationSlug = location.toLowerCase().replace(/\\s+/g, '-').replace(/[^a-z0-9-]/g, '').substring(0, 20);\n    const promptHash = promptText.substring(0, 10).replace(/\\s+/g, '-').toLowerCase().replace(/[^a-z0-9-]/g, '');\n    return `${locationSlug || 'trip'}-${timestamp}-${promptHash}`;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (prompt.trim() && !isGenerating) {\n      setIsGenerating(true);\n      setError(null);\n      setSuccess(false);\n      \n      const tripId = generateTripId(prompt.trim());\n      const promptData = {\n        prompt: prompt.trim(),\n        userId: 'Kartik7',\n        tripId: tripId,\n        timestamp: new Date().toISOString()\n      };\n      \n      // Create trip object from the prompt (always create, even if API fails)\n      const newTrip = createTripFromPrompt(prompt.trim(), tripId, 'Kartik7');\n      \n      // Create AbortController for timeout\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout\n      \n      let apiSuccess = false;\n      \n      // Try to send to API (optional - app works without it)\n      try {\n        console.log('Attempting to send POST request to:', API_ENDPOINT);\n        console.log('Request data:', promptData);\n        \n        const response = await fetch(API_ENDPOINT, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(promptData),\n          signal: controller.signal\n        });\n        \n        clearTimeout(timeoutId);\n\n        console.log('Response status:', response.status);\n\n        if (response.ok) {\n          // Try to parse JSON, but handle non-JSON responses\n          let data;\n          const contentType = response.headers.get('content-type');\n          if (contentType && contentType.includes('application/json')) {\n            data = await response.json();\n          } else {\n            const text = await response.text();\n            data = { message: text || 'Request sent successfully', tripId: tripId };\n          }\n          console.log('API Response:', data);\n          apiSuccess = true;\n        } else {\n          console.warn('API returned non-OK status:', response.status);\n          // Don't throw error, just log it - we'll save locally anyway\n        }\n      } catch (error) {\n        clearTimeout(timeoutId);\n        \n        // Only log the error, don't block the user\n        if (error.name === 'TypeError' && error.message.includes('fetch')) {\n          console.warn('Could not connect to backend API. Saving trip locally only.');\n        } else if (error.name === 'AbortError') {\n          console.warn('API request timed out. Saving trip locally only.');\n        } else {\n          console.warn('API error (non-critical):', error.message);\n        }\n        // Continue anyway - we'll save locally\n      }\n      \n      // Always save trip to localStorage (works offline)\n      saveTripToLocalStorage(newTrip);\n      console.log('Trip saved locally:', newTrip);\n      \n      // Show success message\n      setSuccess(true);\n      \n      // Reset form after successful submission\n      setPrompt('');\n      \n      // Navigate directly to the trip chat page immediately\n      navigate(`/trips/${tripId}/chat`);\n      \n      setIsGenerating(false);\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  // Auto-resize textarea based on content\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    const wrapper = wrapperRef.current;\n    \n    if (textarea) {\n      // Reset height to auto to get the correct scrollHeight\n      textarea.style.height = 'auto';\n      \n      // Get min/max heights based on screen size\n      const isMobile = window.innerWidth <= 768;\n      const minHeight = isMobile ? 70 : 70; // Minimum height in pixels\n      const maxHeight = isMobile ? 200 : 250; // Maximum height in pixels\n      \n      // Calculate new height based on content\n      const scrollHeight = textarea.scrollHeight;\n      \n      // If prompt is empty, force minimum height\n      const newHeight = prompt.trim() === '' \n        ? minHeight \n        : Math.min(Math.max(scrollHeight, minHeight), maxHeight);\n      \n      textarea.style.height = `${newHeight}px`;\n      \n      // Adjust wrapper min-height to accommodate textarea + actions + padding\n      if (wrapper) {\n        const actionsHeight = isMobile ? 36 : 40; // Button height\n        const padding = isMobile ? 20 : 24; // Top + bottom padding\n        const margin = isMobile ? 10 : 10; // Margin bottom of textarea\n        \n        // Base min-height for empty state\n        const baseMinHeight = isMobile ? 110 : 120;\n        \n        // If prompt is empty, use base min-height, otherwise calculate\n        const calculatedMinHeight = prompt.trim() === ''\n          ? baseMinHeight\n          : newHeight + actionsHeight + padding + margin;\n        \n        wrapper.style.minHeight = `${Math.max(calculatedMinHeight, baseMinHeight)}px`;\n      }\n    }\n  }, [prompt, isFocused]);\n\n  // Initial resize on mount\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      const scrollHeight = textarea.scrollHeight;\n      const isMobile = window.innerWidth <= 768;\n      const minHeight = isMobile ? 70 : 70;\n      textarea.style.height = `${Math.max(scrollHeight, minHeight)}px`;\n    }\n  }, []);\n\n  return (\n    <div id=\"search-bar\" className=\"search-container\">\n      <form className=\"search-form\" onSubmit={handleSubmit}>\n        <div \n          ref={wrapperRef}\n          className={`search-wrapper ${isFocused ? 'focused' : ''} ${isGenerating ? 'generating' : ''}`}\n          onClick={(e) => {\n            // If clicking on the wrapper (not on textarea or button), focus the textarea\n            if (e.target === e.currentTarget || e.target.classList.contains('search-wrapper')) {\n              textareaRef.current?.focus();\n            }\n          }}\n        >\n          <textarea\n            ref={textareaRef}\n            className=\"search-input\"\n            placeholder={t('searchPlaceholder')}\n            value={prompt}\n            onChange={(e) => setPrompt(e.target.value)}\n            onFocus={() => setIsFocused(true)}\n            onBlur={() => setIsFocused(false)}\n            onKeyDown={handleKeyDown}\n            disabled={isGenerating}\n            style={{ width: '100%', overflowY: 'auto' }}\n          />\n          <div className=\"search-actions\">\n            <div className=\"char-count\">\n              {prompt.length > 0 && (\n                <span className={prompt.length > 2000 ? 'char-count-warning' : ''}>\n                  {prompt.length} characters\n                </span>\n              )}\n            </div>\n            <button \n              type=\"submit\" \n              className=\"search-button\"\n              disabled={!prompt.trim() || isGenerating}\n              title=\"Generate itinerary (Enter)\"\n            >\n              {isGenerating ? (\n                <div className=\"spinner\"></div>\n              ) : (\n                        <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M5 12H19M19 12L12 5M19 12L12 19\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n              </svg>\n              )}\n            </button>\n          </div>\n        </div>\n        {error && (\n          <div className=\"search-message search-error\">\n            <p>❌ <strong>Error:</strong> {error}</p>\n          </div>\n        )}\n        {success && (\n          <div className=\"search-message search-success\">\n            <p>✅ <strong>Success:</strong> Your travel plan request has been sent successfully!</p>\n          </div>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default SearchBar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}